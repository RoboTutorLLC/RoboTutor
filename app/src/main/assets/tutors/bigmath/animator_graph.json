{
  "animatorMap": {
    "COMMENT": "BigMath",

    "bigmath": {

      "type": "ANIMATOR",
      "title": "BigMath",
      "COMMENT": "BigMath",
      "version": "1.0.0",
      "rootnode": "INTRO",

      "nodeMap": {

        "COMMENT": "@@@@@  CNodes  @@@@@",

        "INTRO": {
          "type": "NODE",
          "COMMENT": "Intro Clip - we only ever visit this node once",
          "maptype":"moduleMap",
          "mapname": "INTRO",
          "preenter": ["SET_VERSION"],
          "preexit": [],
          "edges": [
            {
              "constraint": "",
              "edge": "NEXT_PROBLEM"
            }
          ]
        },

        "NEXT_PROBLEM": {
          "type": "NODE",
          "COMMENT": "This node presents the next problem in the data source.",
          "maptype":"moduleMap",
          "mapname": "NEXTPROBLEM",
          "preenter": [],
          "preexit": [],
          "edges": [
            {
              "constraint": "",
              "edge": "NEXT_DIGIT"
            }
          ]
        },


        "NEXT_DIGIT":{
          "COMMENT":"This node moves to the next digit in the problem.",
          "type":"node",
          "maptype":"moduleMap",
          "mapname": "NEXTDIGIT",
          "preenter":[],
          "preexit" :[],
          "edges":
          [
            {"constraint":"","edge":"USER_INPUT"}
          ]
        },

        // ROBO_MATH

        "USER_INPUT": {
          "COMMENT":"Preps the tutor for user input, then waits for user input.",
          "type": "node",
          "maptype":"moduleMap",
          "mapname": "USERINPUT",
          "preenter": [],
          "preexit": [],
          "edges": [
            {"constraint": "FTR_CORRECT", "edge": "CORRECT_FEEDBACK"},
            {"constraint": "", "edge": "WRONG_FEEDBACK"}
          ]
        },

        "CORRECT_FEEDBACK": {
          "COMMENT": "Provides feedback for correct response.",
          "type": "node",
          "maptype": "moduleMap",
          "mapname": "CORRECTFEEDBACK",
          "preenter": [],
          "preexit": [],
          "edges": [
            {"constraint": "FTR_PROBLEM_DONE", "edge": "PROBLEM_CORRECT"}, // if done with problem, continue to next problem
            {"constraint": "FTR_PROBLEM_HAS_MORE", "edge": "NEXT_DIGIT"}   // if not done, progress to next digit
          ]
        },

        "WRONG_FEEDBACK": {
          "COMMENT": "Provides feedback for wrong response.",
          "type": "node",
          "maptype": "moduleMap",
          "mapname": "WRONGFEEDBACK",
          "preenter": [],
          "preexit": [],
          "edges": [
            {"constraint": "", "edge": "USER_INPUT"} // go back to wait for user input
          ]
        },

        "PROBLEM_CORRECT": {
          "COMMENT": "When user has completed a problem.",
          "type": "node",
          "maptype": "moduleMap",
          "mapname": "PROBLEMCORRECT",
          "preenter": [],
          "preexit": [],
          "edges": [
            {"constraint": "FTR_MORE_PROBLEMS", "edge": "NEXT_PROBLEM"}, // if more problems, go to next problem
            {"constraint": "FTR_PROBLEMS_DONE", "edge": "NEXT_SCENE"}    // if problems done, go to next scene (aka finish)
          ]
        },

        "NEXT_SCENE": {
          "type": "NODE",
          "COMMENT": "When module is complete - move to next scene",
          "maptype": "actionMap",
          "mapname": "NEXTSCENE",
          "preenter": [],
          "preexit": [],
          "edges": [

          ]
        }

      },

      // ROBO_MATH continue...
      "moduleMap": {

        "COMMENT": "@@@@@  CModules  @@@@@",

        "INTRO": {
          "type": "MODULE",
          "reuse":true,
          "COMMENT": "???",
          "tracks": [
            {"name": "LOG_EVENT", "type": "QUEUEDCOMMAND", "id": "SBigMath", "method": "logState", "parms": "type#node,value#INTRO:String", "features":""},
            // welcome to math
            // TEMP
            {"name":"Introduction Audio", "type": "AUDIO", "command": "PLAY", "soundsource": "Lets add some numbers now.mp3",       "soundpackage":"temp", "volume": 1.0, "mode":"flow", "features": ""}
            ]
        },

        "NEXTPROBLEM": {
          "type": "MODULE",
          "reuse": true,
          "COMMENT": "???",
          "tracks": [
            {"name": "LOG_EVENT", "type": "QUEUEDCOMMAND", "id": "SBigMath", "method": "logState", "parms": "type#node,value#NEXTPROBLEM:String", "features":""},

            {"type": "COMMAND", "id": "SBigMath", "method": "next", "features": ""}
          ]
        },

        "NEXTDIGIT": {
          "type": "MODULE",
          "reuse": true,
          "COMMENT": "???",
          "tracks": [
            {"name": "LOG_EVENT", "type": "QUEUEDCOMMAND", "id": "SBigMath", "method": "logState", "parms": "type#node,value#NEXTDIGITs:String", "features":""},

            // ROBO_MATH (3)
            {"type": "COMMAND", "id": "SBigMath", "method": "nextDigit", "features": ""}

            // tap the numbers

          ]
        },

        "USERINPUT": {
          "type": "MODULE",
          "reuse": true,
          "COMMENT": "???",
          "tracks": [
            {"name": "LOG_EVENT", "type": "QUEUEDCOMMAND", "id": "SBigMath", "method": "logState", "parms": "type#node,value#USERINPUT:String", "features":""},

            // ROBO_MATH (3)
            // ROBO_MATH (3) WAIT
            // WAIT
            {"type": "COMMAND", "cmd": "WAIT"}

          ]
        },

        "CORRECTFEEDBACK": {
          "type": "MODULE",
          "reuse": true,
          "COMMENT": "???",
          "tracks": [
            {"name": "LOG_EVENT", "type": "QUEUEDCOMMAND", "id": "SBigMath", "method": "logState", "parms": "type#node,value#CORRECTFEEDBACK:String", "features":""},

            // ROBO_MATH (3)
            // Good!
            {"type": "AUDIO", "command": "PLAY", "soundsource": "Right.mp3", "soundpackage":"temp", "volume": 1.0, "mode":"flow", "features": ""}

          ]
        },

        "WRONGFEEDBACK": {
          "type": "MODULE",
          "reuse": true,
          "COMMENT": "???",
          "tracks": [
            {"name": "LOG_EVENT", "type": "QUEUEDCOMMAND", "id": "SBigMath", "method": "logState", "parms": "type#node,value#WRONGFEEDBACK:String", "features":""},

            // ROBO_MATH (3)
            {"type": "AUDIO", "command": "PLAY", "soundsource": "Not quite try again.mp3",       "soundpackage":"temp", "volume": 1.0, "mode":"flow", "features": ""}

          ]
        },

        "PROBLEMCORRECT": {
          "type": "MODULE",
          "reuse": true,
          "COMMENT": "???",
          "tracks": [
            {"name": "LOG_EVENT", "type": "QUEUEDCOMMAND", "id": "SBigMath", "method": "logState", "parms": "type#node,value#PROBLEMCORRECT:String", "features":""},

            {"type": "AUDIO", "command": "PLAY", "soundsource": "Good.mp3", "soundpackage":"temp", "volume": 1.0, "mode":"flow", "features": ""}

            // ROBO_MATH (3)

          ]
        }

      },

      "actionMap": {

        "COMMENT": "@@@@@  CActions @@@@@ ",

        "SET_VERSION":{"type": "COMMAND", "id": "Sbanner", "method": "setVersionID", "parms": "v.0.0.1:String","features":""},

        "NEXTNODE": {"type": "COMMAND", "cmd": "NEXT"},

        "NEXTSCENE": {"type":"COMMAND", "cmd": "NEXTSCENE"}

      },

      // ROBO_MATH continue...
      "constraintMap": {

        "COMMENT": "@@@@@  CConstraints @@@@@ ",

        "FTR_CORRECT": {
          "type": "CONDITION",
          "test": "FTR_CORRECT"
        },

        "FTR_WRONG": {
          "type": "CONDITION",
          "test": "FTR_WRONG"
        },

        "FTR_PROBLEM_DONE": {
          "type": "CONDITION",
          "test": "FTR_PROBLEM_DONE"
        },

        "FTR_PROBLEM_HAS_MORE": {
          "type": "CONDITION",
          "test": "FTR_PROBLEM_HAS_MORE"
        },

        "FTR_MORE_PROBLEMS": {
          "type": "CONDITION",
          "test": "FTR_MORE_PROBLEMS"
        },

        "FTR_PROBLEMS_DONE": {
          "type": "CONDITION",
          "test": "FTR_PROBLEMS_DONE"
        }

      }
    }
  }
}
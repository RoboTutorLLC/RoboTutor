{
  "animatorMap": {
    "COMMENT": "Animation Graph for the Word Copy Tutor",

    "word_copy": {

      "type": "ANIMATOR",
      "title": "Word copying tutor",
      "COMMENT": "This tutor is designed for copying words.",
      "version": "1.0.0",
      "rootnode": "DEMO_SELECT",

      "subgraphMap": {

        "INPUT_HESITATION_FEEDBACK": {
          "type": "SUBGRAPH",
          "rootnode": "INPUT_HESITATION_MODULE",

          "nodeMap": {
            "INPUT_HESITATION_MODULE": {
              "type": "MODULE",
              "COMMENT": "prompt when user hesitates when they should be writing.",
              "preenter": [],
              "reuse": true,
              "tracks": [
                {"type": "COMMAND", "id": "word_copy", "method": "postEvent",           "parms": "RIPPLE_HIGHLIGHT:String|1000:Integer", "features":""},

                {"type": "AUDIO", "command": "PLAY", "soundsource": "Please write the number.mp3","soundpackage": "default","mode": "flow", "features": "FTR_NUMBERS"},
                {"type": "AUDIO", "command": "PLAY", "soundsource": "Please write the letter.mp3","soundpackage": "default","mode": "flow", "features": "FTR_LETTERS"},
                {"type": "AUDIO", "command": "PLAY", "soundsource": "Please write the word.mp3","soundpackage": "default","mode": "flow", "features": "FTR_WORDS"},

                {"type": "AUDIO", "command": "PLAY", "soundsource": "{{word_copy.value}}.mp3","soundpackage": "words","mode":"flow", "features": "FTR_WORDS"},
                {"type": "AUDIO", "command": "PLAY", "soundsource": "{{word_copy.value}}.mp3","soundpackage": "letters","mode":"flow", "features": "FTR_LETTERS"},
                {"type": "AUDIO", "command": "PLAY", "soundsource": "{{word_copy.value}}.mp3","soundpackage": "numbers","mode":"flow", "features": "FTR_NUMBERS"}
              ],
              "preexit": [
              ],
              "edges": [
              ]
            }
          }
        },

        "REPLAY_BEHAVIOR": {
          "type": "SUBGRAPH",
          "rootnode": "REPLAY_MODULE",

          "nodeMap": {
            "REPLAY_MODULE": {
              "type": "MODULE",
              "COMMENT": "prompt when user hesitates when they should be writing.",
              "preenter": [],
              "reuse": true,
              "tracks": [
                {"type": "COMMAND", "id": "word_copy", "method": "enableReplayButton", "parms": "FALSE:Boolean", "features":""},

                {"type": "COMMAND", "id": "word_copy", "method": "inhibitInput", "parms": "TRUE:Boolean",             "features":"" },
                {"type": "COMMAND", "id": "word_copy", "method": "cancelPost",   "parms": "HESITATION_PROMPT:String", "features":"" },

                {"type": "AUDIO", "command": "PLAY", "soundsource": "Please write the number.mp3","soundpackage": "default","mode": "flow", "features": "FTR_NUMBERS"},
                {"type": "AUDIO", "command": "PLAY", "soundsource": "Please write the letter.mp3","soundpackage": "default","mode": "flow", "features": "FTR_LETTERS"},
                {"type": "AUDIO", "command": "PLAY", "soundsource": "Please write the word.mp3",  "soundpackage": "default","mode": "flow", "features": "FTR_WORDS"},

                {"type": "AUDIO", "command": "PLAY", "soundsource": "{{word_copy.value}}.mp3","soundpackage": "words","mode":"flow", "features": "FTR_WORDS"},
                {"type": "AUDIO", "command": "PLAY", "soundsource": "{{word_copy.value}}.mp3","soundpackage": "letters","mode":"flow", "features": "FTR_LETTERS"},
                {"type": "AUDIO", "command": "PLAY", "soundsource": "{{word_copy.value}}.mp3","soundpackage": "numbers","mode":"flow", "features": "FTR_NUMBERS"},

                {"type": "COMMAND", "id": "word_copy", "method": "postEvent",           "parms": "RIPPLE_HIGHLIGHT:String", "features":""},
                {"type": "COMMAND", "id": "word_copy", "method": "inhibitInput",        "parms": "FALSE:Boolean",           "features":""},

                {"type": "COMMAND", "id": "word_copy", "method": "enableReplayButton", "parms": "TRUE:Boolean", "features":""}
              ],
              "preexit": [
              ],
              "edges": [
              ]
            }
          }
        },

        "DICTATION_HESITATION_FEEDBACK": {
          "type": "SUBGRAPH",
          "rootnode": "DICTATION_HESITATION_MODULE",

          "nodeMap": {
            "DICTATION_HESITATION_MODULE": {
              "type": "MODULE",
              "COMMENT": "prompt when user hesitates when they should be writing.",
              "preenter": [],
              "reuse": true,
              "tracks": [
                {"type": "COMMAND", "id": "word_copy", "method": "inhibitInput",        "parms": "TRUE:Boolean",                  "features":""},
                {"type": "COMMAND", "id": "word_copy", "method": "postEvent",           "parms": "POINT_AT_REPLAY_BUTTON:String", "features":""},

                {"type": "AUDIO", "command": "PLAY", "soundsource": "Please tap here to hear the word again.mp3","soundpackage": "default","mode": "flow", "features": ""},

                {"type": "COMMAND", "id": "word_copy", "method": "inhibitInput",        "parms": "FALSE:Boolean",           "features":""}
              ],
              "preexit": [
              ],
              "edges": [
              ]
            }
          }
        },

        "ERASE_HESITATION_FEEDBACK": {
          "type": "SUBGRAPH",
          "rootnode": "ERASE_BUTTON_FEEDBACK_MODULE",

          "nodeMap": {
            "ERASE_BUTTON_FEEDBACK_MODULE": {
              "type": "MODULE",
              "COMMENT": "Explain the erase button",
              "preenter": [],
              "reuse": true,
              "tracks": [
//                {"type": "COMMAND", "id": "word_copy", "method": "inhibitInput",        "parms": "TRUE:Boolean",                 "features":""},
                {"type": "COMMAND", "id": "word_copy", "method": "postEvent",           "parms": "POINT_AT_ERASE_BUTTON:String", "features":""},

                {"type": "AUDIO", "command": "PLAY", "soundsource": "Please tap here to try again.mp3","soundpackage": "default","mode": "flow", "features": ""}

//                {"type": "COMMAND", "id": "word_copy", "method": "inhibitInput", "parms": "FALSE:Boolean","features":""},
//                {"type": "COMMAND", "id": "word_copy", "method": "postNamed",    "parms": "ERASE_BUTTON_PROMPT:String|APPLY_BEHAVIOR:String|ERASE_HESITATION_FEEDBACK:String|12000:Long",  "features":""}
              ],
              "preexit": [
              ],
              "edges": [
              ]
            }
          }
        },

        
        "ERASE_BEHAVIOR": {
          "type": "SUBGRAPH",
          "COMMENT": "glyph metrics have been violated",
          "rootnode": "ERASE_MODULE",

          "nodeMap": {

            "ERASE_MODULE": {
              "type": "MODULE",
              "preenter": [],
              "reuse": true,
              "tracks": [
                {"type": "COMMAND", "id": "word_copy", "method": "cancelPost",      "parms": "ERASE_BUTTON_PROMPT:String", "features":""},
                {"type": "COMMAND", "id": "word_copy", "method": "showEraseButton", "parms": "FALSE:Boolean",              "features":""}
              ],
              "preexit": [
              ],
              "edges": [
              ]
            }
          }
        },


        "GENERAL_CORRECT_BEHAVIOR": {
          "type": "SUBGRAPH",
          "rootnode": "CORRECT_BEHAVIOR_MODULE",

          "nodeMap": {

            "CORRECT_BEHAVIOR_MODULE": {
              "type": "MODULE",
              "COMMENT": "Configure delayed erase button feedabck",
              "preenter": [],
              "reuse": true,
              "tracks": [
                // clean up after tracing - hide the sample and ensure the other fields are re-enabled
                {"type": "COMMAND", "id": "word_copy", "method": "postEvent",           "parms": "HIDE_SAMPLE:String",  "features":""},
                {"type": "COMMAND", "id": "word_copy", "method": "inhibitInput",        "parms": "FALSE:Boolean",       "features":""},

                {"type": "AUDIO", "command": "PLAY", "soundsource": "Good.mp3","soundpackage": "default","mode": "flow", "features": "FTR_ATTEMPT_4"},

                {"type": "COMMAND", "id": "word_copy", "method": "postEvent", "parms": "HIGHLIGHT_NEXT:String|0:Integer",    "features":"FTR_INPUT_STALLED"},
                {"type": "COMMAND", "id": "word_copy", "method": "postEvent", "parms": "HIGHLIGHT_NEXT:String|500:Integer",  "features":"FTR_INPUT_STALLED"},
                {"type": "COMMAND", "id": "word_copy", "method": "postEvent", "parms": "HIGHLIGHT_NEXT:String|1000:Integer", "features":"FTR_INPUT_STALLED"},

                {"type": "COMMAND", "id": "word_copy", "method": "postEvent", "parms": "CLEAR_ATTEMPT:String",  "features":""}
              ],
              "preexit": [
              ],
              "edges": [
              ]
            }
          }
        },

        "GENERAL_ERROR_BEHAVIOR": {
          "type": "SUBGRAPH",
          "rootnode": "ERROR_BEHAVIOR_MODULE",

          "nodeMap": {

            "ERROR_BEHAVIOR_MODULE": {
              "type": "MODULE",
              "COMMENT": "Configure delayed erase button feedabck",
              "preenter": [],
              "reuse": true,
              "tracks": [
//                Un-comment to use erase button
//                {"type": "COMMAND", "cmd": "FEATURE-ADD", "value": "FTR_ERASE_BTN" },

                {"type": "COMMAND", "id": "word_copy", "method": "setVolatileBehavior", "parms": "ON_ERASE:String|ERASE_BEHAVIOR:String" ,"features":"!FTR_ATTEMPT_4&FTR_ERASE_BTN"},
                {"type": "COMMAND", "id": "word_copy", "method": "postNamed",           "parms": "ERASE_BUTTON_PROMPT:String|APPLY_BEHAVIOR:String|ERASE_HESITATION_FEEDBACK:String|6000:Long",  "features":"!FTR_ATTEMPT_4&FTR_ERASE_BTN"},

                {"type": "COMMAND", "id": "word_copy", "method": "showEraseButton",     "parms": "TRUE:Boolean",                           "features":"FTR_ATTEMPT_1&FTR_ERASE_BTN"},
                {"type": "COMMAND", "id": "word_copy", "method": "inhibitInput",        "parms": "TRUE:Boolean",                           "features":"FTR_ATTEMPT_2|FTR_ATTEMPT_3"},

                {"type": "COMMAND", "id": "word_copy", "method": "postEvent",           "parms": "ANIMATE_ALIGN:String",                    "features":"FTR_ATTEMPT_2"},
                {"type": "COMMAND", "id": "word_copy", "method": "postEvent",           "parms": "ANIMATE_OVERLAY:String",                  "features":"FTR_ATTEMPT_3"},

                {"type": "AUDIO", "command": "PLAY", "soundsource": "That doesnt look like.mp3",  "soundpackage": "default", "mode": "flow", "features": "!FTR_ATTEMPT_4"},

                {"type": "AUDIO", "command": "PLAY", "soundsource": "{{word_copy.expected}}.mp3", "soundpackage": "letters", "mode": "flow", "features": "FTR_WORDS&!FTR_ATTEMPT_4"},
                {"type": "AUDIO", "command": "PLAY", "soundsource": "{{word_copy.expected}}.mp3", "soundpackage": "letters", "mode": "flow", "features": "FTR_LETTERS&!FTR_ATTEMPT_4"},
                {"type": "AUDIO", "command": "PLAY", "soundsource": "{{word_copy.expected}}.mp3", "soundpackage": "numbers", "mode": "flow", "features": "FTR_NUMBERS&!FTR_ATTEMPT_4"},

                // On iteration 2 / 3 we do a delayed show of the erase button and prompt to retry
                {"type": "COMMAND", "id": "word_copy", "method": "showEraseButton",     "parms": "TRUE:Boolean",              "features":"FTR_ATTEMPT_2&FTR_ERASE_BTN"},
                {"type": "COMMAND", "id": "word_copy", "method": "showEraseButton",     "parms": "TRUE:Boolean",              "features":"FTR_ATTEMPT_3&FTR_ERASE_BTN"},

                {"type": "AUDIO", "command": "PLAY", "soundsource": "Try again.mp3","soundpackage": "default","mode": "flow", "features":"!FTR_ATTEMPT_4"},

                {"type": "COMMAND", "id": "word_copy", "method": "postEvent",           "parms": "ERASE_GLYPH:String",                  "features":"!FTR_ERASE_BTN"},

                // On iteration 4+ we ask them to trace the character.
                {"type": "COMMAND", "id": "word_copy", "method": "postEvent",           "parms": "ERASE_GLYPH:String",                  "features":"FTR_ATTEMPT_4"},
                {"type": "COMMAND", "id": "word_copy", "method": "postEvent",           "parms": "SHOW_SAMPLE:String",                  "features":"FTR_ATTEMPT_4"},
                {"type": "COMMAND", "id": "word_copy", "method": "postEvent",           "parms": "INHIBIT_OTHERS:String",               "features":"FTR_ATTEMPT_4"},

                {"type": "AUDIO", "command": "PLAY", "soundsource": "Please trace the letter.mp3", "soundpackage": "default","mode": "flow", "features": "FTR_ATTEMPT_4"},

                {"type": "AUDIO", "command": "PLAY", "soundsource": "{{word_copy.expected}}.mp3", "soundpackage": "letters", "mode": "flow", "features": "FTR_WORDS&FTR_ATTEMPT_4"},
                {"type": "AUDIO", "command": "PLAY", "soundsource": "{{word_copy.expected}}.mp3", "soundpackage": "letters", "mode": "flow", "features": "FTR_LETTERS&FTR_ATTEMPT_4"},
                {"type": "AUDIO", "command": "PLAY", "soundsource": "{{word_copy.expected}}.mp3", "soundpackage": "numbers", "mode": "flow", "features": "FTR_NUMBERS&FTR_ATTEMPT_4"}
              ],
              "preexit": [
              ],
              "edges": [
              ]
            }
          }
        },

        "METRIC_ERROR_BEHAVIOR": {
          "type": "SUBGRAPH",
          "COMMENT": "glyph metrics have been violated",
          "rootnode": "METRIC_ERROR_MODULE",

          "nodeMap": {

            "METRIC_ERROR_MODULE": {
              "type": "MODULE",
              "preenter": [],
              "reuse": true,
              "tracks": [
              ],
              "preexit": [
              ],
              "edges": [
              ]
            }
          }
        },

        "CHAR_ERROR_BEHAVIOR": {
          "type": "SUBGRAPH",
          "COMMENT": "wrong character was selected by recognizer",
          "rootnode": "CHAR_ERROR_MODULE",

          "nodeMap": {

            "CHAR_ERROR_MODULE": {
              "type": "MODULE",
              "preenter": [],
              "reuse": true,
              "tracks": [
              ],
              "preexit": [
              ],
              "edges": [
              ]
            }
          }
        },

        "ITEM_COMPLETE_BEHAVIOR": {
          "type": "SUBGRAPH",
          "COMMENT": "The data item - letter/word/sentence is finished",
          "rootnode": "ITEM_COMPLETE_MODULE",

          "nodeMap": {

            "ITEM_COMPLETE_MODULE": {
              "type": "MODULE",
              "preenter": [],
              "reuse": true,
              "tracks": [

                {"type": "COMMAND", "id": "word_copy", "method": "postEvent",           "parms": "HIDE_SAMPLE:String",  "features":""},
                {"type": "COMMAND", "id": "word_copy", "method": "setVolatileBehavior", "parms": "REPLAY_COMPLETE:String|DELAYED_NEXT:String" ,"features":"FTR_HAD_ERRORS"},

                {"type": "COMMAND", "id": "word_copy", "method": "postEvent",           "parms": "HIDE_GLYPHS:String",                     "features":"FTR_HAD_ERRORS"},
                {"type": "COMMAND", "id": "word_copy", "method": "postEvent",           "parms": "RIPPLE_PROTO:String",                    "features":"FTR_HAD_ERRORS"},

                {"type": "AUDIO", "command": "PLAY", "soundsource": "Yay.mp3","soundpackage": "default","mode": "flow", "features": "FTR_HAD_ERRORS"},

                {"type": "AUDIO", "command": "PLAY", "soundsource": "{{word_copy.value}}.mp3","soundpackage": "words",   "mode":"flow", "features": "FTR_WORDS"},
                {"type": "AUDIO", "command": "PLAY", "soundsource": "{{word_copy.value}}.mp3","soundpackage": "letters", "mode":"flow", "features": "FTR_LETTERS"},
                {"type": "AUDIO", "command": "PLAY", "soundsource": "{{word_copy.value}}.mp3","soundpackage": "numbers", "mode":"flow", "features": "FTR_NUMBERS"},

                {"type": "AUDIO", "command": "PLAY", "soundsource": "Very good.mp3",          "soundpackage": "default","mode":"flow", "features": "!FTR_HAD_ERRORS"},

                {"type": "COMMAND", "id": "word_copy", "method": "postEvent", "parms": "APPLY_BEHAVIOR:String|NEXT_NODE:String|600:Integer", "features":"!FTR_HAD_ERRORS"}

              ],
              "preexit": [
              ],
              "edges": [
              ]
            }
          }
        }

      },

      "nodeMap": {

        "COMMENT": "@@@@@  CNodes  @@@@@",

        // TODO: Setup some criteria for when to present the demo

        "DEMO_SELECT": {
          "type": "NODE",
          "COMMENT": "Intro Clip",
          "maptype":"moduleMap",
          "mapname": "EMPTY_MODULE",

//          Use this to enable metric constraints on glyphs
          "preenter":["SET_CONSTRAINT"],
          "preexit" :[],
          "edges": [
            {"constraint": "FTR_NO_DEMO", "edge": "INTRO_STATE"},
            {"constraint": "", "edge": "DEMO_STATE"}
          ]
        },

        "DEMO_STATE": {
          "type": "NODE",
          "COMMENT": "Interaction Demo",
          "maptype":"moduleMap",
          "mapname":"DEMO_MODULE",
          "preenter":["SET_VERSION","SET_DEMOSOURCE","NEXT_DEMO_MODULE"],
          "preexit" :[],
          "edges": [
            {
              "constraint": "",
              "edge": "INTRO_STATE"
            }
          ]
        },

        "INTRO_STATE": {
          "type": "NODE",
          "COMMENT": "Intro Clip",
          "maptype":"moduleMap",
          "mapname": "PLAYINTRO",
          "preenter":["SET_VERSION","SET_DATASOURCE"],
          "preexit" :[],
          "edges": [
            {
              "constraint": "",
              "edge": "NEXTITEM"
            }
          ]
        },

        "NEXTITEM":{
          "COMMENT":"This node presents a word for user to copy.",
          "type":"node",
          "preenter":["NEXT_DATA_MODULE"],
          "maptype":"moduleMap",
          "mapname": "PLAYWORD",
          "preexit" :[],
          "edges":
          [
            {"constraint":"","edge":"INPUTLETTER"}
          ]
        },

        "INPUTLETTER":{
          "COMMENT":"Input a letter",
          "type":"node",
          "maptype":"moduleMap",
          "mapname": "INPUT_MODULE",
          "preenter":[],
          "preexit" :[],
          "edges":
          [
            {"constraint":"COND_PASS1","edge":"EXITCLIP1"},
            {"constraint":"COND_PASS2","edge":"EXITCLIP2"},
            {"constraint":"","edge":"NEXTITEM"}
          ]
        },

        "CORRECT":{
          "COMMENT":"When user inputs a correct answer...",
          "type":"node",
          "maptype":"moduleMap",
          "mapname": "PLAYCORRECT",
          "preenter":[],
          "preexit" :["REMOVERESPONSE","REMOVESTIMULUS"],
          "edges":
          [
            {"constraint":"COND_PASS1","edge":"EXITCLIP1"},
            {"constraint":"COND_PASS2","edge":"EXITCLIP2"},
            {"constraint":"","edge":"NEXTITEM"}
          ]
        },

        "WRONG":{
          "COMMENT":"When user inputs an incorrect answer...",
          "type":"node",
          "maptype":"moduleMap",
          "mapname": "PLAYWRONG",
          "preenter":[],
          "preexit" :["REMOVERESPONSE"],
          "edges":
          [

            {"constraint":"","edge":"USERINPUT"}
          ]
        },

        "UNRECOGNIZED":{
          "COMMENT":"When the recognizer fails to identify the input...",
          "type":"node",
          "maptype":"moduleMap",
          "mapname": "PLAYUNRECOGNIZED",
          "preenter":[],
          "preexit" :["REMOVERESPONSE"],
          "edges":
          [
            {"constraint":"","edge":"USERINPUT"}
          ]
        },

        "EXITCLIP1": {
          "COMMENT":"Exit Clip for ALL_CORRECT",
          "type":"node",
          "maptype":"moduleMap",
          "mapname": "PLAYEXIT1",
          "preenter":[],
          "preexit" :[],
          "edges":
          [
            {"constraint":"","edge":"NEXTSCENE"}
          ]
        },

        "EXITCLIP2": {"COMMENT":"Exit Clip for NOT_ALL_CORRECT",
          "type":"node",
          "maptype":"moduleMap",
          "mapname": "PLAYEXIT2",
          "preenter":[],
          "preexit" :[],
          "edges":
          [
            {"constraint":"","edge":"NEXTSCENE"}
          ]
        },

        "NEXTSCENE": {
          "type": "NODE",
          "COMMENT": "When module is complete - move to next scene in the scenegraph",
          "maptype":"actionMap",
          "mapname":"GOTONEXTSCENE",
          "preenter": [],
          "preexit": [],
          "edges": [
          ]
        }
      },

      "moduleMap": {

        "COMMENT": "@@@@@  CModules  @@@@@",

        "EMPTY_MODULE": {
          "type":"MODULE",
          "reuse":true,
          "COMMENT": "Do Nothing",
          "tracks": [
          ]
        },

        "SET_DEMOSOURCE": {
          "type":"MODULE",
          "reuse":true,
          "COMMENT": "Initialize the data source - ",
          "tracks": [
            {"type": "COMMAND", "id": "word_copy", "method": "pushDataSource", "parms": "[saba]:String","features":"LANG_SW&FTR_WORDS"},
            {"type": "COMMAND", "id": "word_copy", "method": "pushDataSource", "parms": "[one]:String", "features":"LANG_EN&FTR_WORDS"},

            {"type": "COMMAND", "id": "word_copy", "method": "pushDataSource", "parms": "[f]:String","features":"FTR_LOWERCASE"},

            {"type": "COMMAND", "id": "word_copy", "method": "pushDataSource", "parms": "[G]:String","features":"FTR_UPPERCASE"},

            {"type": "COMMAND", "id": "word_copy", "method": "pushDataSource", "parms": "[4]:String","features":"FTR_NUMBERS"}
          ]
        },

        "DEMO_MODULE": {
          "type":"MODULE",
          "reuse":true,
          "COMMENT": "Initialize the data source - ",

          "tracks": [
            // Disable the writing controllers while the demo is in progress
            {"type": "COMMAND", "id": "word_copy", "method": "inhibitInput", "parms": "TRUE:Boolean","features":""},

            // This will play during the demo replay
// This show the same result as below using the actual hash value with a # prefix
//            {"type": "AUDIO", "command": "PLAY", "soundsource": "#17789a6e7851f9eb025208fb221b521b.mp3", "soundpackage":"default", "volume": 1.0, "mode":"flow", "features": "FTR_LETTERS"},

            {"type": "AUDIO", "command": "PLAY", "soundsource": "now we will practice writing some letters.mp3", "soundpackage":"default", "volume": 1.0, "mode":"flow", "features": "FTR_LETTERS"},
            {"type": "AUDIO", "command": "PLAY", "soundsource": "now lets practice writing some numbers.mp3", "soundpackage":"default", "volume": 1.0, "mode":"flow", "features": "FTR_NUMBERS"},
            {"type": "AUDIO", "command": "PLAY", "soundsource": "now lets practice writing some words.mp3", "soundpackage":"default", "volume": 1.0, "mode":"flow", "features": "FTR_WORDS"},

            // When the word replay is complete move to the next node
            {"type": "COMMAND", "id": "word_copy", "method": "setVolatileBehavior", "parms": "REPLAY_COMPLETE:String|DELAYED_NEXT:String" ,"features":""},
            {"type": "COMMAND", "id": "word_copy", "method": "postEvent",           "parms": "RIPPLE_DEMO:String|500:Integer",             "features":""},
            {"type": "COMMAND", "cmd": "WAIT" },

            // Next will fire when replay completes
            {"type": "COMMAND", "id": "word_copy", "method": "clear", "parms": "", "features":""},
            {"type": "AUDIO", "command": "PLAY", "soundsource": "Now you try it.mp3", "soundpackage":"default", "volume": 1.0, "mode":"flow", "features": ""},

            // Restore the initial datasource if present
            {"type": "COMMAND", "id": "word_copy", "method": "popDataSource", "features":""},

            {"type": "COMMAND", "id": "word_copy", "method": "inhibitInput", "parms": "FALSE:Boolean","features":""},
            {"type": "COMMAND", "cmd":"FEATURE-ADD", "value": "FTR_DEMO_SHOWN", "features":""}
          ]
        },

        "PLAYINTRO":{
          "type": "MODULE",
          "reuse":true,
          "COMMENT": "TBD",
          "tracks": [
            {"type": "AUDIO", "command": "PLAY", "soundsource": "Now lets practice writing some words.mp3", "mode":"flow", "features": "!FTR_DEMO_SHOWN"}
          ]
        },

        "PLAYWORD": {
          "type": "MODULE",
          "reuse":true,
          "COMMENT": "TBD",
          "tracks": [
            {"type": "COMMAND", "id": "Sstimulus", "method": "zoomInOut", "parms": "2.0:Float:1000:Long","features":""},
            {"type": "AUDIO", "command": "PLAY", "soundsource": "{{word_copy.value}}.mp3","soundpackage": "words","mode":"flow", "features": "FTR_WORDS"},
            {"type": "AUDIO", "command": "PLAY", "soundsource": "{{word_copy.value}}.mp3","soundpackage": "letters","mode":"flow", "features": "FTR_LETTERS"},
            {"type": "AUDIO", "command": "PLAY", "soundsource": "{{word_copy.value}}.mp3","soundpackage": "numbers","mode":"flow", "features": "FTR_NUMBERS"}
          ]
        },

        "NEXT_DATA_MODULE": {
          "type": "MODULE",
          "preenter": [],
          "reuse": true,
          "tracks": [
            // Input must be inhibited until all the behaviors are set
            //
            {"type": "COMMAND", "id": "word_copy", "method": "inhibitInput", "parms": "TRUE:Boolean","features":""},

            {"type": "COMMAND", "id": "word_copy", "method": "setStickyBehavior", "parms": "ON_REPLAY_COMMAND:String|REPLAY_BEHAVIOR:String" ,"features":""},

            {"type": "COMMAND", "id": "word_copy", "method": "setStickyBehavior", "parms": "ON_ERROR:String|GENERAL_ERROR_BEHAVIOR:String" ,"features":""},
            {"type": "COMMAND", "id": "word_copy", "method": "setStickyBehavior", "parms": "ON_CORRECT:String|GENERAL_CORRECT_BEHAVIOR:String" ,"features":""},

            {"type": "COMMAND", "id": "word_copy", "method": "setStickyBehavior", "parms": "ON_METRIC_ERROR:String|METRIC_ERROR_BEHAVIOR:String" ,"features":""},
            {"type": "COMMAND", "id": "word_copy", "method": "setStickyBehavior", "parms": "ON_CHAR_ERROR:String|CHAR_ERROR_BEHAVIOR:String" ,"features":""},

            {"type": "COMMAND", "id": "word_copy", "method": "setStickyBehavior", "parms": "ON_START_WRITING:String|CANCEL_HESITATION_FEEDBACK:String" ,"features":""},

            {"type": "COMMAND", "id": "word_copy", "method": "postNamed",         "parms": "HESITATION_PROMPT:String|APPLY_BEHAVIOR:String|INPUT_HESITATION_FEEDBACK:String|6000:Long",      "features":"!FTR_DICTATION"},
            {"type": "COMMAND", "id": "word_copy", "method": "postNamed",         "parms": "HESITATION_PROMPT:String|APPLY_BEHAVIOR:String|DICTATION_HESITATION_FEEDBACK:String|6000:Long",  "features":"FTR_DICTATION"},

            {"type": "COMMAND", "id": "word_copy", "method": "setVolatileBehavior", "parms": "DATA_ITEM_COMPLETE:String|ITEM_COMPLETE_BEHAVIOR:String" ,"features":""},

            {"type": "COMMAND", "id": "word_copy", "method": "next" ,"features":""},

            {"type": "COMMAND", "id": "word_copy", "method": "showReplayButton",   "parms": "TRUE:Boolean", "features":"FTR_DICTATION"},
            {"type": "COMMAND", "id": "word_copy", "method": "enableReplayButton", "parms": "TRUE:Boolean", "features":"FTR_DICTATION"}
          ],
          "preexit": [
          ],
          "edges": [
          ]
        },

        "NEXT_DEMO_MODULE": {
          "type": "MODULE",
          "preenter": [],
          "reuse": true,
          "tracks": [
            {"type": "COMMAND", "id": "word_copy", "method": "inhibitInput", "parms": "TRUE:Boolean","features":""},
            {"type": "COMMAND", "id": "word_copy", "method": "next" ,"features":""}
          ],
          "preexit": [
          ],
          "edges": [
          ]
        },

        "INPUT_MODULE":{
          "type":"MODULE",
          "reuse":true,
          "COMMENT": "glyph input module",
          "tracks": [
            {"type": "COMMAND", "id": "word_copy", "method": "inhibitInput", "parms": "FALSE:Boolean","features":""},
            {"type": "COMMAND", "cmd": "WAIT" },
            {"type": "COMMAND", "id": "word_copy", "method": "inhibitInput", "parms": "TRUE:Boolean","features":""}
          ]
        },

        "PLAYCORRECT":{
          "type": "MODULE",
          "reuse":true,
          "COMMENT": "TBD",
          "tracks": [
            {"type": "COMMAND", "id": "Sresponse", "method": "setForeGround", "parms": "normal:String","features":""}, //set the correct string in normal color
            {"type": "AUDIO", "command": "PLAY", "soundsource": "Good.mp3","mode":"flow", "features": ""}
          ]
        },

        "PLAYWRONG": {
          "type": "MODULE",
          "reuse":true,
          "COMMENT": "TBD",
          "tracks": [
            {"type": "COMMAND", "id": "Sresponse", "method": "setForeGround", "parms": "wrong:String","features":""}, //flag the incorrect string in red color
            {"type": "AUDIO", "command": "PLAY", "soundsource": "That looks like.mp3", "mode":"flow","features": ""},

            {"type": "AUDIO", "command": "PLAY", "soundsource": "{{Sresponse.value}}.mp3","mode":"flow", "features": ""},  // the recognizer output

            {"type": "AUDIO", "command": "PLAY", "soundsource": "Try again.mp3","mode":"flow", "features": ""}
          ]
        },

        "PLAYUNRECOGNIZED": {
          "type": "MODULE",
          "reuse":true,
          "COMMENT": "TBD",
          "tracks": [
            {"type": "COMMAND", "id": "Sresponse", "method": "setForeGround", "parms": "wrong:String","features":""}, //flag the incorrect string in red color
            {"type": "AUDIO", "command": "PLAY", "soundsource": "Huh.mp3", "mode":"flow","features": ""},
            {"type": "AUDIO", "command": "PLAY", "soundsource": "That doesnt look like.mp3", "mode":"flow","features": ""},
            {"type": "AUDIO", "command": "PLAY", "soundsource": "{{word_copy.value}}.mp3","mode":"flow", "features": ""}, //the stimulus digit
            {"type": "AUDIO", "command": "PLAY", "soundsource": "Try again.mp3","mode":"flow", "features": ""}
          ]
        },

        "PLAYEXIT1":{
          "type": "MODULE",
          "reuse":true,
          "COMMENT": "TBD",
          "tracks": [
            {"type": "AUDIO", "command": "PLAY", "soundsource": "You did a good job.mp3", "soundpackage":"xprize", "mode":"flow", "features": ""},
            {"type": "AUDIO", "command": "PLAY", "soundsource": "You wrote all of them correctly.mp3", "soundpackage":"xprize", "mode":"flow", "features": ""}
          ]
        },

        "PLAYEXIT2":{
          "type": "MODULE",
          "reuse":true,
          "COMMENT": "TBD",
          "tracks": [
            {"type": "AUDIO", "command": "PLAY", "soundsource": "You did a good job.mp3", "soundpackage":"xprize", "mode":"flow", "features": ""},
            {"type": "AUDIO", "command": "PLAY", "soundsource": "Next time you can do better.mp3", "soundpackage":"xprize", "mode":"flow", "features": ""}
          ]
        },

        "SET_DATASOURCE": {
          "type":"MODULE",
          "reuse":true,
          "COMMENT": "Initialize the data source - ",
          "tracks": [
            {"type": "COMMAND", "id": "word_copy", "method": "setDataSource", "parms": "[saba,sifuri,mbili]:String","features":"!DATA_WORD_COPY&LANG_SW"},
            {"type": "COMMAND", "id": "word_copy", "method": "setDataSource", "parms": "[one,two,three]:String","features":"!DATA_WORD_COPY&LANG_EN"}
          ]
        }
      },

      "actionMap": {

        "my_action": {"type": "TIMER", "name": "hint_timeout", "duration":"20", "repeat":"false", "action":"START", "ontimer":"ACTION_NAME", "features": "" },

        "COMMENT": "@@@@@  CActions @@@@@ ",

        "SET_VERSION":{"type": "COMMAND", "id": "Sbanner", "method": "setVersionID", "parms": "v.0.1.0:String","features":""},

        "CANCEL_HESITATION_FEEDBACK": {"type": "COMMAND", "id": "word_copy", "method": "cancelPost", "parms": "HESITATION_PROMPT:String",    "features":""},


        "FW_DISABLE":{"type": "COMMAND", "id": "word_copy", "method": "inhibitInput", "parms": "TRUE:Boolean","features":""},
        //disable FingerWriting
        "FW_ENABLE":{"type": "COMMAND", "id": "word_copy", "method": "inhibitInput", "parms": "FALSE:Boolean","features":""},
        //enable FingerWriting

        // Set the LTK+ metric constraint
        "SET_CONSTRAINT":{"type": "COMMAND", "id": "word_copy", "method": "setConstraint", "parms": "H,0.15;W,0.15;Y,0.10;X,0.15:String", "features":""},
        
        //"GETRESPONSE":{"type": "COMMAND", "id": "Sresponse", "method": "???" ,"features":""},
        //get the recognized character from the recognizer???

        "SHOWRESPONSE":{"type": "COMMAND", "id": "Sresponse", "method": "show", "parms": "TRUE:Boolean","features":""},
        "REMOVERESPONSE":{"type": "COMMAND", "id": "Sresponse", "method": "clear", "features":""},
        //remove the preview string

        "SHOWSTIMULUS":{"type": "COMMAND", "id": "Sstimulus", "method": "show", "parms": "TRUE:Boolean","features":""},
        "REMOVESTIMULUS":{"type": "COMMAND", "id": "Sstimulus", "method": "show", "parms": "FALSE:Boolean","features":""},
        //remove the stimulus

        // support the ASK component
        "INIT_ASK":     {"type": "COMMAND", "id": "Spicker", "method": "setStickyBehavior", "parms": "SPEAK_BUTTON:String|PICKER_TRACK:String" ,"features":""},
        "PICKER_TRACK": {"type": "TIMELINE", "trackname": "ASK_BUTTON", "features": ""},

        "DELAYED_NEXT":{"type": "COMMAND", "id": "word_copy", "method": "postEvent", "parms": "APPLY_BEHAVIOR:String|NEXT_NODE:String|600:Integer", "features":""},

        "GOTONEXTSCENE":   {"type": "COMMAND", "cmd": "NEXTSCENE"},
        "RETURN_AND_GO":   {"type": "COMMAND", "cmd": "SUBGRAPH_RETURN_AND_GO"},
        "RETURN_AND_WAIT": {"type": "COMMAND", "cmd": "SUBGRAPH_RETURN_AND_WAIT"},
        "NEXT_NODE":       {"type": "COMMAND", "cmd": "NEXT"  },
        "WAIT":            {"type": "COMMAND", "cmd": "WAIT"  }
      },

      "constraintMap": {

        "COMMENT": "@@@@@  CConstraints @@@@@ ",

        "COND_PASS1": {
          "type": "CONDITION",
          "If": "FTR_NOWORDS && ALL_CORRECT",
          "Then":"true",
          "Else":"false"
        },

        "COND_PASS2": {
          "type": "CONDITION",
          "If": "FTR_NOWORDS && NOT_ALL_CORRECT",
          "Then":"true",
          "Else":"false"
        },

        "FTR_NOWORDS":{
          "type": "CONDITION",
          "test":"FTR_NOWORDS"
        },

        "FTR_WORDS":{
          "type": "CONDITION",
          "test":"!FTR_NOWORDS"
        },

        "FTR_NO_DEMO":{
          "type": "CONDITION",
          "test":"FTR_NO_DEMO"
        },

        "ALL_CORRECT":{
          "type": "CONDITION",
          "test":"ALL_CORRECT"
        },

        "NOT_ALL_CORRECT":{
          "type": "CONDITION",
          "test":"!ALL_CORRECT"
        },

        "FTR_RIGHT":{
          "type": "CONDITION",
          "test":"FTR_RIGHT"
        },

        "FTR_WRONG":{
          "type": "CONDITION",
          "test":"FTR_WRONG"
        },

        "FTR_UNRECOGNIZED":{
          "type": "CONDITION",
          "test":"FTR_UNRECOGNIZED"
        }
      }
    }
  }
}
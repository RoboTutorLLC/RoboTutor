{
  "animatorMap": {
    "COMMENT": "Animation Graph for the Activity Selector",

    "activity_selector": {

      "type": "ANIMATOR",
      "title": "Activity Selector",
      "COMMENT": "",
      "version": "1.0.0",
      "rootnode": "INTRO_STATE",

      "subgraphMap": {

        "INPUT_HESITATION_FEEDBACK": {
          "type": "SUBGRAPH",
          "rootnode": "INPUT_HESITATION_MODULE",

          "nodeMap": {
            "INPUT_HESITATION_MODULE": {
              "type": "MODULE",
              "COMMENT": "prompt when user hesitates when they should be writing.",
              "preenter": [],
              "reuse": true,
              "tracks": [
                {"type": "COMMAND", "id": "activity_selector", "method": "postEvent", "parms": "RIPPLE_DESCRIBE:String", "features":""}
              ],
              "preexit": [
              ],
              "edges": [
              ]
            }
          }
        },

        "BUTTON_DESCRIPTION": {
          "type": "SUBGRAPH",
          "rootnode": "BUTTON_DESCRIPTION_MODULE",

          "nodeMap": {
            "BUTTON_DESCRIPTION_MODULE": {
              "type": "MODULE",
              "COMMENT": "prompt when user hesitates when they should be writing.",
              "preenter": [],
              "reuse": true,
              "tracks": [
                {"type": "COMMAND", "id": "activity_selector", "method": "postEvent", "parms": "POINT_AT_BUTTON:String|{{activity_selector.buttonid}}:String", "features":""},
                {"type": "AUDIO", "command": "PLAY", "soundsource": "{{activity_selector.helpAudio}}.mp3","soundpackage": "default","mode": "flow", "features": ""},
                {"type": "COMMAND", "id": "activity_selector", "method": "postNamed", "parms": "DESCRIBE_NEXT:String|DESCRIBE_NEXT:String|600:Long", "features":""}
              ],
              "preexit": [
                "CANCEL_POINT"
              ],
              "edges": [
              ]
            }
          }
        },

        "BUTTON_BEHAVIOR": {
          "type": "SUBGRAPH",
          "COMMENT": "User selected Math Activity",
          "rootnode": "BUTTON_BEHAVIOR_MODULE",

          "nodeMap": {

            "BUTTON_BEHAVIOR_MODULE": {
              "type": "MODULE",
              "preenter": ["CLEAR_DESCRIBENEXT_BEHAVIOR"],
              "reuse": true,
              "tracks": [
                {"type": "AUDIO", "command": "PLAY", "soundsource": "{{activity_selector.promptAudio}}.mp3","soundpackage": "default","mode": "flow", "features": ""},
                {"type": "COMMAND", "id": "activity_selector", "method": "postEvent",  "parms": "BUTTON_EVENT:String|{{activity_selector.buttonid}}:String", "features":""}
              ],
              "preexit": [
              ],
              "edges": [
              ]
            }
          }
        }
      },


      "nodeMap": {

        "COMMENT": "@@@@@  CNodes  @@@@@",

        "INTRO_STATE": {
          "type": "NODE",
          "COMMENT": "Intro Clip",
          "maptype":"moduleMap",
          "mapname": "PAUSE_MODULE",
          "preenter": [
            "SHOW_ACTIVITY_SELECTOR", "INIT_MODULE"
          ],
          "preexit": [
          ],
          "edges": [
            {"constraint": "", "edge": "NEXTSCENE"}
          ]
        },

        "NEXTSCENE": {
          "type": "NODE",
          "COMMENT": "When module is complete - move to next scene in the scenegraph",
          "maptype":"actionMap",
          "mapname":"GOTONEXTSCENE",
          "preenter": [],
          "preexit": [],
          "edges": [
          ]
        }
      },

      
      "moduleMap": {

        "COMMENT": "@@@@@  CModules  @@@@@",

        "PAUSE_MODULE": {
          "type":"MODULE",
          "reuse":true,
          "COMMENT": "Do Nothing",
          "tracks": [
            {"type": "COMMAND", "cmd": "WAIT" }
          ]
        },

        "INIT_MODULE": {
          "type": "MODULE",
          "preenter": [],
          "reuse": true,
          "tracks": [
            // Input must be inhibited until all the behaviors are set
            //
            {"type": "COMMAND", "id": "activity_selector", "method": "setStickyBehavior", "parms": "DESCRIBE_BEHAVIOR:String|BUTTON_DESCRIPTION:String" ,"features":""},
            {"type": "COMMAND", "id": "activity_selector", "method": "setStickyBehavior", "parms": "DESCRIBE_COMPLETE:String|SET_HESITATION_FEEDBACK:String" ,"features":""},
            {"type": "COMMAND", "id": "activity_selector", "method": "setStickyBehavior", "parms": "SELECT_BEHAVIOR:String|CLEAR_HESITATION_BEHAVIOR:String" ,"features":""},

            {"type": "COMMAND", "id": "activity_selector", "method": "setStickyBehavior", "parms": "LAUNCH_EVENT:String|LAUNCH_BEHAVIOR:String" ,"features":""},

            {"type": "COMMAND", "id": "activity_selector", "method": "postNamed",         "parms": "HESITATION_PROMPT:String|APPLY_BEHAVIOR:String|INPUT_HESITATION_FEEDBACK:String|6000:Long", "features":""},

            // Map the button events defined in the activity_selector dataSource to Behavior subgraphs
            //
            {"type": "COMMAND", "id": "activity_selector", "method": "setStickyBehavior", "parms": "SELECT_READING:String|BUTTON_BEHAVIOR:String" ,"features":""},
            {"type": "COMMAND", "id": "activity_selector", "method": "setStickyBehavior", "parms": "SELECT_STORIES:String|BUTTON_BEHAVIOR:String" ,"features":""},
            {"type": "COMMAND", "id": "activity_selector", "method": "setStickyBehavior", "parms": "SELECT_MATH:String|BUTTON_BEHAVIOR:String" ,"features":""},
            {"type": "COMMAND", "id": "activity_selector", "method": "setStickyBehavior", "parms": "SELECT_SHAPES:String|BUTTON_BEHAVIOR:String" ,"features":""},
            {"type": "COMMAND", "id": "activity_selector", "method": "setStickyBehavior", "parms": "SELECT_ROBOTUTOR:String|BUTTON_BEHAVIOR:String" ,"features":""}
          ]
        }

      },

      "actionMap": {

        "SET_HESITATION_FEEDBACK": {"type": "COMMAND", "id": "activity_selector", "method": "postNamed", "parms": "HESITATION_PROMPT:String|APPLY_BEHAVIOR:String|INPUT_HESITATION_FEEDBACK:String|6000:Long", "features":""},
        "CLEAR_HESITATION_BEHAVIOR":  {"type": "COMMAND", "id": "activity_selector", "method": "cancelPost", "parms": "HESITATION_PROMPT:String", "features":"" },
        "CLEAR_DESCRIBENEXT_BEHAVIOR":  {"type": "COMMAND", "id": "activity_selector", "method": "cancelPost", "parms": "DESCRIBE_NEXT:String", "features":"" },

        "LAUNCH_BEHAVIOR":{"type": "COMMAND", "cmd": "LAUNCH-TUTOR", "parms":"{{activity_selector.intent}}:String|{{activity_selector.intentData}}:String|{{activity_selector.dataSource}}:String|{{activity_selector.features}}:String" },

        "SHOW_ACTIVITY_SELECTOR": {"type": "COMMAND", "id": "activity_selector", "method": "setLayout",  "parms": "ACTIVITY_SELECT:String",  "features":""},
        "CANCEL_POINT":           {"type": "COMMAND", "id": "activity_selector", "method": "postEvent",  "parms": "CANCEL_POINTAT:String", "features":""},

        "CANCEL_FEEDBACK": {"type": "COMMAND", "cmd": "CANCEL_NODE"},
        "GOTONEXTSCENE":   {"type": "COMMAND", "cmd": "NEXTSCENE"},
        "WAIT": {"type": "COMMAND", "cmd": "WAIT" }
      },

      "constraintMap": {

        "COMMENT": "@@@@@  CConstraints @@@@@ ",

        "FTR_NOWORDS": {
          "type": "CONDITION",
          "cmd": "test",
          "code": "FTR_NOWORDS"
        },
        "FTR_WORDS": {
          "type": "CONDITION",
          "cmd": "test",
          "code": "!FTR_NOWORDS"
        },
        "FTR_RIGHT": {
          "type": "CONDITION",
          "cmd": "test",
          "code": "FTR_RIGHT"
        },
        "FTR_WRONG": {
          "type": "CONDITION",
          "cmd": "test",
          "code": "!FTR_RIGHT"
        }
      }
    }
  }
}